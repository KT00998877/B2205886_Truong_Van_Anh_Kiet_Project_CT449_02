<template>
    <div class="auth-page">
        <div class="content-wrapper">
            <div class="register-container">
                <img src="../../assets/img/logo.jpg" alt="User Register" />
                <h2>ÄÄƒng kÃ½</h2>

                <form @submit.prevent="handleRegister">
                    <input v-model="username" type="text" placeholder="TÃªn Ä‘Äƒng nháº­p" required />
                    <input v-model="email" type="email" placeholder="Email" required />
                    <input v-model="password" type="password" placeholder="Máº­t kháº©u" required />

                    <input v-model="HoLot" type="text" placeholder="Há» lÃ³t" required />
                    <input v-model="Ten" type="text" placeholder="TÃªn" required />

                    <select v-model="Phai" required>
                        <option disabled value="">-- Chá»n giá»›i tÃ­nh --</option>
                        <option value="Nam">Nam</option>
                        <option value="Ná»¯">Ná»¯</option>
                    </select>

                    <label>NgÃ y sinh:</label>
                    <input v-model="NgaySinh" type="date" required />

                    <input v-model="DiaChi" type="text" placeholder="Äá»‹a chá»‰" required />
                    <input v-model="SoDienThoai" type="text" placeholder="Sá»‘ Ä‘iá»‡n thoáº¡i" required />

                    <button type="submit">ÄÄƒng kÃ½</button>
                </form>

                <p>ÄÃ£ cÃ³ tÃ i khoáº£n?
                    <router-link to="/user/login">ÄÄƒng nháº­p</router-link>
                </p>
            </div>
        </div>
    </div>
</template>

<script setup>
import { ref } from "vue";
import { registerUser } from "../../services/authService";
import { useRouter } from "vue-router";

const router = useRouter();

// ğŸ§  Khai bÃ¡o cÃ¡c trÆ°á»ng trong form
const username = ref("");
const email = ref("");
const password = ref("");
const HoLot = ref("");
const Ten = ref("");
const Phai = ref("");
const NgaySinh = ref("");
const DiaChi = ref("");
const SoDienThoai = ref("");


const handleRegister = async () => {
    try {
        await registerUser({
            username: username.value,
            email: email.value,
            password: password.value,
            HoLot: HoLot.value,
            Ten: Ten.value,
            Phai: Phai.value,
            NgaySinh: NgaySinh.value,
            DiaChi: DiaChi.value,
            SoDienThoai: SoDienThoai.value,
        });
        alert("ÄÄƒng kÃ½ thÃ nh cÃ´ng!");
        router.push("/user/login");
    } catch (err) {
        alert(err.response?.data?.message || "ÄÄƒng kÃ½ tháº¥t báº¡i!");
    }
};
</script>